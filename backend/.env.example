# =============================================================================
# AI Audio KB Backend Configuration
# =============================================================================

# Server Configuration
NODE_ENV=development
PORT=3000
HOST=localhost
API_VERSION=v1

# MongoDB Atlas Configuration
MONGODB_URI=mongodb+srv://username:password@cluster.mongodb.net/ai_audio_kb?retryWrites=true&w=majority
MONGODB_DB_NAME=ai_audio_kb
MONGODB_POOL_SIZE=20
MONGODB_MAX_IDLE_TIME=30000
MONGODB_SERVER_SELECTION_TIMEOUT=5000
MONGODB_SOCKET_TIMEOUT=45000

# Redis Configuration
REDIS_URL=redis://localhost:6379
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# Authentication & Security
JWT_SECRET=your-super-secure-jwt-secret-key-here-minimum-32-chars
JWT_REFRESH_SECRET=your-super-secure-refresh-secret-key-here-minimum-32-chars
JWT_EXPIRES_IN=24h
JWT_REFRESH_EXPIRES_IN=7d
API_KEY_SALT=your-api-key-salt-here
ENCRYPTION_KEY=your-32-byte-encryption-key-here

# AWS Configuration
AWS_REGION=us-west-2
AWS_ACCESS_KEY_ID=your_aws_access_key
AWS_SECRET_ACCESS_KEY=your_aws_secret_key
S3_BUCKET_NAME=ai-audio-kb-storage
S3_BUCKET_REGION=us-west-2
S3_PRESIGNED_URL_EXPIRES=3600

# Deepgram Configuration (Primary ASR)
DEEPGRAM_API_KEY=your_deepgram_api_key
DEEPGRAM_MODEL=nova-2
DEEPGRAM_LANGUAGE=en-US
DEEPGRAM_TIER=enhanced

# Google Speech-to-Text Configuration (Fallback ASR)
GOOGLE_APPLICATION_CREDENTIALS=./config/google-service-account.json
GOOGLE_PROJECT_ID=your_google_project_id
GOOGLE_STT_MODEL=latest_short
GOOGLE_STT_LANGUAGE=en-US

# OpenAI Configuration (Embeddings & Agent Integration)
OPENAI_API_KEY=your_openai_api_key
OPENAI_ORGANIZATION=your_openai_org_id
OPENAI_EMBEDDING_MODEL=text-embedding-3-small
OPENAI_EMBEDDING_DIMENSIONS=768
OPENAI_MAX_TOKENS=4096

# Langfuse Configuration (Observability)
LANGFUSE_SECRET_KEY=your_langfuse_secret_key
LANGFUSE_PUBLIC_KEY=your_langfuse_public_key
LANGFUSE_BASE_URL=https://cloud.langfuse.com
LANGFUSE_ENABLED=true

# Audio Processing Configuration
AUDIO_SAMPLE_RATE=16000
AUDIO_CHANNELS=1
AUDIO_SEGMENT_DURATION=5000
AUDIO_VAD_THRESHOLD=0.5
AUDIO_SILENCE_THRESHOLD=700
AUDIO_MAX_FILE_SIZE=50000000
SUPPORTED_AUDIO_FORMATS=opus,wav,m4a,mp3

# Rate Limiting & Performance
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_SKIP_SUCCESSFUL_REQUESTS=false
UPLOAD_RATE_LIMIT_MB_PER_SECOND=5
CONCURRENT_TRANSCRIPTIONS=10

# Cost Controls & Guardrails
MAX_COST_PER_HOUR_USD=0.75
COST_ALERT_THRESHOLD_USD=0.60
AUTO_THROTTLE_ENABLED=true
BILLING_ALERTS_ENABLED=true

# WebSocket Configuration
WS_HEARTBEAT_INTERVAL=30000
WS_MAX_CONNECTIONS=1000
WS_MAX_BUFFER_SIZE=1048576
WS_COMPRESSION_ENABLED=true

# Background Jobs (Bull Queue)
REDIS_QUEUE_PREFIX=ai-audio-kb
QUEUE_CONCURRENCY=5
JOB_RETRY_ATTEMPTS=3
JOB_RETRY_DELAY=5000

# Monitoring & Metrics
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL=30000

# Logging Configuration
LOG_LEVEL=info
LOG_FILE_ENABLED=true
LOG_FILE_PATH=./logs/app.log
LOG_FILE_MAX_SIZE=10mb
LOG_FILE_MAX_FILES=5
LOG_CONSOLE_ENABLED=true

# Regional Policies
REGION_POLICY_FILE=./config/region-policies.json
DEFAULT_REGION=US-CA
AUDIT_LOG_RETENTION_DAYS=2555
CONSENT_HASH_ALGORITHM=sha256

# Circuit Breaker Configuration
CIRCUIT_BREAKER_ENABLED=true
CIRCUIT_BREAKER_FAILURE_THRESHOLD=5
CIRCUIT_BREAKER_TIMEOUT=60000
CIRCUIT_BREAKER_RESET_TIMEOUT=30000

# Feature Flags
FEATURE_WEBSOCKET_STREAMING=true
FEATURE_BATCH_PROCESSING=true
FEATURE_AGENT_INTEGRATION=true
FEATURE_TEAM_SHARING=false
FEATURE_ADVANCED_ANALYTICS=false

# Development & Testing
MOCK_ASR_ENABLED=false
MOCK_EMBEDDING_ENABLED=false
TEST_DATABASE_URL=postgresql://test_user:test_pass@localhost:5432/ai_audio_kb_test
SEED_DATA_ENABLED=false

# =============================================================================
# Important Security Notes:
# 1. Never commit this file with real secrets to version control
# 2. Use environment-specific .env files (.env.production, .env.staging)
# 3. Consider using AWS Secrets Manager or similar for production secrets
# 4. Rotate keys regularly and implement key rotation procedures
# =============================================================================
